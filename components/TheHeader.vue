<template>
  <header class="header">
    <div class="header-left-column">
      <div class="title-header" @click="goTo('/home')">
        <svg
          width="85"
          height="85"
          viewBox="0 0 115 112"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g filter="url(#filter0_d)">
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M35.1739 87C29.5783 87 25 82.4217 25 76.8261V32.1739C25 26.5783 29.5783 22 35.1739 22H79.8261C85.4217 22 90 26.5783 90 32.1739V76.8261C90 82.4217 85.4217 87 79.8261 87H35.1739Z"
              fill="#FBFBFF"
            />
            <path
              d="M35.1739 86.75C29.7163 86.75 25.25 82.2837 25.25 76.8261V32.1739C25.25 26.7163 29.7163 22.25 35.1739 22.25H79.8261C85.2837 22.25 89.75 26.7163 89.75 32.1739V76.8261C89.75 82.2837 85.2837 86.75 79.8261 86.75H35.1739Z"
              stroke="#E6E3FF"
              stroke-width="0.5"
            />
          </g>
          <g filter="url(#filter1_d)">
            <path
              d="M74.6049 51.3962C77.5638 43.0615 73.2398 33.8386 64.9157 30.8835C56.5916 27.9284 47.4195 32.3601 44.4606 40.6948C43.2896 43.9935 43.5258 48.8752 45.2187 53.0136C46.8983 57.115 45.831 62.637 44.3475 66.8159L43.7658 68.4543L57.6411 73.3802L58.2179 71.7554C59.7014 67.5765 62.3514 62.6276 66.2304 60.4883C70.1746 58.3147 73.5748 54.2977 74.6049 51.3962Z"
              fill="#CDC9FF"
            />
          </g>
          <path
            d="M72.1388 50.4745C74.6102 43.5129 70.9996 35.808 64.0439 33.3387C57.0883 30.8694 49.4291 34.5727 46.9574 41.535C45.9783 44.2929 46.1755 48.3692 47.5903 51.8265C48.9931 55.2529 49.1661 60.2438 47.9268 63.7345L47.4414 65.102L56.9024 68.4607L57.3837 67.1051C58.6231 63.6137 61.9015 59.8572 65.1425 58.0702C68.4375 56.2549 71.278 52.8993 72.1386 50.4751L72.1388 50.4745Z"
            fill="#E6E3FF"
          />
          <g filter="url(#filter2_d)">
            <path
              d="M51.8145 79.9207L44.1638 77.2046C43.8963 77.1096 43.7142 76.849 43.6705 76.5115L43.5872 73.4451L54.6338 77.3667L52.6356 79.6942C52.3883 79.9284 52.0832 80.0161 51.8157 79.9211L51.8145 79.9207Z"
              fill="#424272"
            />
          </g>
          <g filter="url(#filter3_d)">
            <path
              d="M58.5989 66.7015L47.233 62.6666C46.3882 62.3667 45.4602 62.8084 45.1603 63.6531L42.028 72.4766C41.7281 73.3214 42.1698 74.2493 43.0145 74.5492L54.3805 78.5842C55.2253 78.8841 56.1532 78.4424 56.4531 77.5976L59.5855 68.7742C59.8854 67.9294 59.4437 67.0014 58.5989 66.7015Z"
              fill="#63639F"
            />
          </g>
          <path
            d="M62.7242 40.3167L53.9655 46.9676C53.493 47.329 53.6167 48.0236 54.1674 48.2191L56.7125 49.1226L51.4816 53.9318C51.0784 54.3277 51.5223 54.9854 52.0256 54.7378L63.5757 49.196C64.1681 48.9044 64.1301 48.0338 63.5156 47.8157L59.6671 46.4494L63.4187 40.9889C63.7273 40.5187 63.1662 39.9793 62.7242 40.3167Z"
            fill="#CDC9FF"
          />
          <defs>
            <filter
              id="filter0_d"
              x="0"
              y="0"
              width="115"
              height="115"
              filterUnits="userSpaceOnUse"
              color-interpolation-filters="sRGB"
            >
              <feFlood flood-opacity="0" result="BackgroundImageFix" />
              <feColorMatrix
                in="SourceAlpha"
                type="matrix"
                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
              />
              <feOffset dy="3" />
              <feGaussianBlur stdDeviation="12.5" />
              <feColorMatrix
                type="matrix"
                values="0 0 0 0 0.803922 0 0 0 0 0.788235 0 0 0 0 1 0 0 0 0.3 0"
              />
              <feBlend
                mode="normal"
                in2="BackgroundImageFix"
                result="effect1_dropShadow"
              />
              <feBlend
                mode="normal"
                in="SourceGraphic"
                in2="effect1_dropShadow"
                result="shape"
              />
            </filter>
            <filter
              id="filter1_d"
              x="10.6311"
              y="3.53271"
              width="94.3565"
              height="100.735"
              filterUnits="userSpaceOnUse"
              color-interpolation-filters="sRGB"
            >
              <feFlood flood-opacity="0" result="BackgroundImageFix" />
              <feColorMatrix
                in="SourceAlpha"
                type="matrix"
                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
              />
              <feOffset dy="3" />
              <feGaussianBlur stdDeviation="12.5" />
              <feColorMatrix
                type="matrix"
                values="0 0 0 0 0.803922 0 0 0 0 0.788235 0 0 0 0 1 0 0 0 0.3 0"
              />
              <feBlend
                mode="normal"
                in2="BackgroundImageFix"
                result="effect1_dropShadow"
              />
              <feBlend
                mode="normal"
                in="SourceGraphic"
                in2="effect1_dropShadow"
                result="shape"
              />
            </filter>
            <filter
              id="filter2_d"
              x="17.4663"
              y="51.4451"
              width="62.1674"
              height="57.0786"
              filterUnits="userSpaceOnUse"
              color-interpolation-filters="sRGB"
            >
              <feFlood flood-opacity="0" result="BackgroundImageFix" />
              <feColorMatrix
                in="SourceAlpha"
                type="matrix"
                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
              />
              <feOffset dy="3" />
              <feGaussianBlur stdDeviation="12.5" />
              <feColorMatrix
                type="matrix"
                values="0 0 0 0 0.803922 0 0 0 0 0.788235 0 0 0 0 1 0 0 0 0.3 0"
              />
              <feBlend
                mode="normal"
                in2="BackgroundImageFix"
                result="effect1_dropShadow"
              />
              <feBlend
                mode="normal"
                in="SourceGraphic"
                in2="effect1_dropShadow"
                result="shape"
              />
            </filter>
            <filter
              id="filter3_d"
              x="16.4849"
              y="40.1235"
              width="68.6436"
              height="67.0037"
              filterUnits="userSpaceOnUse"
              color-interpolation-filters="sRGB"
            >
              <feFlood flood-opacity="0" result="BackgroundImageFix" />
              <feColorMatrix
                in="SourceAlpha"
                type="matrix"
                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
              />
              <feOffset dy="3" />
              <feGaussianBlur stdDeviation="12.5" />
              <feColorMatrix
                type="matrix"
                values="0 0 0 0 0.803922 0 0 0 0 0.788235 0 0 0 0 1 0 0 0 0.3 0"
              />
              <feBlend
                mode="normal"
                in2="BackgroundImageFix"
                result="effect1_dropShadow"
              />
              <feBlend
                mode="normal"
                in="SourceGraphic"
                in2="effect1_dropShadow"
                result="shape"
              />
            </filter>
          </defs>
        </svg>

        HEX
        <span class="title-purple"> TECH. </span>
      </div>
    </div>

    <div class="header-right-column">
      <nav>
        <div
          v-for="(item, itemIndex) of menuOptions"
          :key="'menu-item-' + itemIndex"
          class="menu-item"
        >
          <ul v-if="item.name == 'Areas'" class="menu-item-dropdown">
            <li @mouseover="areasList = true" @mouseleave="areasList = false">
              <div class="headerContent headerContent-area">
                {{ item.name }}
              </div>
              <transition name="fade">
                <ul v-if="areasList" @click="areasList = false">
                  <div class="elements-block">
                    <li
                      v-for="(area, areaIndex) of areas"
                      :key="'menu-area-' + areaIndex"
                      class="areas-element"
                    >
                      <nuxt-link
                        :to="'/area/' + area.id"
                        class="area-element-text"
                      >
                        {{ area.title }}
                      </nuxt-link>
                    </li>
                  </div>
                </ul>
              </transition>
            </li>
          </ul>
          <nuxt-link
            v-if="item.name != 'Areas'"
            :to="item.path"
            class="headerContent"
          >
            {{ item.name }}
          </nuxt-link>
        </div>
      </nav>
      <div>
        <button class="contact-button">CONTACT US</button>
      </div>
    </div>
  </header>
</template>

<script>
import GoToMixins from '~/mixins/goTo-mixins.js'

export default {
  mixins: [GoToMixins],
  data() {
    return {
      areas: [],

      areasList: false,

      menuOptions: [
        {
          name: 'Home',
          path: '/home',
        },
        {
          name: 'Areas',
          path: '/area',
        },
        {
          name: 'Services',
          path: '/service',
        },
        {
          name: 'Case Studies',
          path: '/casestudy',
        },
        {
          name: 'Team',
          path: '/team',
        },
        {
          name: 'About Us',
          path: '/about',
        },
      ],
    }
  },
  mounted() {
    // retrive area dinamically from store
    this.$store.dispatch('nuxtServerInit')
    this.areas = this.$store.state.menuList
  },
}
</script>

<style>
.header {
  position: sticky;
  z-index: 2;
  height: 90px;
  width: 100%;
  top: 0;
  background-color: white;
  display: flex;
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 0 8px 0 #dedede;
}

.header-left-column {
  margin-left: auto;
  margin-right: auto;
  display: flex;
  align-items: center;
}

.title-header {
  cursor: pointer;
  font-family: 'Poppins', sans-serif;
  font-style: normal;
  font-weight: 800;
  font-size: 40px;
  line-height: 60px;
  display: inline-flex;
  color: #cdc9ff;
  align-items: center;
}

.title-purple,
.nuxt-link-active {
  color: #4d41c9 !important;
}

.header-right-column {
  margin-right: auto;
  display: flex;
  align-items: center;
}

.contact-button {
  font-style: normal;
  font-weight: bold;
  font-size: 16px;
  line-height: 19px;
  text-align: center;
  text-transform: uppercase;
  padding: 15px 25px 15px 25px;
  color: var(--cc-base2);
  background: #e8e6ff;
  border-radius: 35px;
  border: none;
  margin-right: auto;
  margin-left: 45px;
  width: max-content;
}

.menu-item {
  font-style: normal;
  font-weight: 600;
  font-size: 16px;
  line-height: 19px;
  text-transform: uppercase;
  color: #000000;
  margin-left: 45px;
  display: inline-flex;
}
.headerContent-area {
  cursor: default;
}
.menu-item:first-child {
  margin-left: auto;
}

.menu-item ul {
  list-style: none;
}

.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.2s;
}
.fade-enter,
.fade-leave-active {
  opacity: 0;
}

.menu-item-dropdown li {
  float: left;
  position: relative;
  text-decoration: none;
  top: 4px;
}

.menu-item-dropdown {
  padding-left: 0;
}

.elements-block {
  position: absolute;
  left: -80px;
  top: 23px;
}

.menu-item-dropdown li ul li {
  padding: 20px;
  display: block;
  background: var(--cc-base3);
  transition: background 0.3s;
  font-weight: 800;
  text-transform: uppercase;
  width: 200px;
}
.area-element-text {
  color: black;
  text-decoration: none;
}

.menu-item li ul li:hover {
  background: #dcd9fb;
}

.menu-item li ul {
  position: absolute;
  left: 0;
  top: 42px;
  margin: 0;
  color: white;
}
</style>
